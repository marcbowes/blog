#+TITLE: marc-bowes.com

* [[file:/Users/bowes/code/blog/src/org/content/dsql-tpcb.org][DSQL sucks at TPC-B]]
:PROPERTIES:
:RSS_PERMALINK: dsql-tpcb.html
:PUBDATE:  2025-07-02
:ID:       10220c00-3638-4671-b475-8760c75c1bc7
:END:
#+setupfile: ../templates/level0.org
DSQL sucks at TPC-B

Recently Kate Gowron from DoiT published [[https://engineering.doit.com/comparing-aurora-distributed-sql-vs-aurora-serverless-v2-a-practical-cost-analysis-f7cf9cd2dbf8][Comparing Aurora DSQL vs. Aurora
Serverless v2: A Practical Cost Analysis]] on Medium.

I don't know Kate personally, but I was quite excited when this article came
out. When we announced the Preview of Aurora DSQL at re:Invent last year, Kate
and team made a fantastic video on the DoiT YouTube channel:
* [[file:/Users/bowes/code/blog/src/org/content/dsql-scales-to-zero.org][Aurora DSQL scales to zero]]
:PROPERTIES:
:RSS_PERMALINK: dsql-scales-to-zero.html
:PUBDATE:  2025-06-18
:ID:       698e9b1a-4830-4549-9fbc-2c8866b6bcc9
:END:
#+setupfile: ../templates/level0.org
Aurora DSQL scales to zero

The [[https://aws.amazon.com/rds/aurora/dsql/][Amazon Aurora DSQL]] landing page leads with:

#+begin_quote
Amazon Aurora DSQL is the fastest serverless distributed SQL database for always
available applications. Aurora DSQL offers the fastest multi-Region reads and
writes. It makes it effortless for customers to scale to meet any workload
demand with zero infrastructure management and zero downtime maintenance.
#+end_quote
* [[file:/Users/bowes/code/blog/src/org/content/dsql-auth-troubleshooting.org][Troubleshooting problems with DSQL auth]]
:PROPERTIES:
:RSS_PERMALINK: dsql-auth-troubleshooting.html
:PUBDATE:  2025-06-10
:ID:       761ed108-5be5-4fba-957a-28e66288ac2c
:END:
#+setupfile: ../templates/level0.org

Troubleshooting problems with DSQL auth

In this article, we'll look at some of the common ways folks get tripped up
configuring their clients and credentials.

Before continuing, I recommend reading [[file:dsql-auth.org][Aurora DSQL: How authentication and
authorization works]], which should give you a robust mental model of how things
work end to end.
* [[file:/Users/bowes/code/blog/src/org/content/dsql-avoid-hot-keys.org][Aurora DSQL Best Practices: Avoid Hot keys]]
:PROPERTIES:
:RSS_PERMALINK: dsql-avoid-hot-keys.html
:PUBDATE:  2025-06-06
:ID:       c062535d-3c5e-499b-9b39-ecde5e369695
:END:
#+setupfile: ../templates/level0.org
Aurora DSQL Best Practices: Avoid hot keys

In the [[file:dsql-circle-of-life.org][Circle of Life]], I describe the /flow/ of data in Aurora DSQL. Data flows
from the Query Processor (QP), through the journal, and into storage. Once in
storage, it can be queried by future transactions.

[[file:images/circle1.png]]
* [[file:/Users/bowes/code/blog/src/org/content/dsql-how-to-spend-a-dollar.org][Aurora DSQL: How to spend a dollar]]
:PROPERTIES:
:RSS_PERMALINK: dsql-how-to-spend-a-dollar.html
:PUBDATE:  2025-06-02
:ID:       eb77a468-6ee1-4a22-8582-2f836170d183
:END:
#+setupfile: ../templates/level0.org
Aurora DSQL: How to spend a dollar

From [[https://aws.amazon.com/rds/aurora/dsql/pricing/][Amazon Aurora DSQL pricing]]:

#+begin_quote
Aurora DSQL measures all request-based activity, such as query processing,
reads, and writes, using a single normalized billing unit called Distributed
Processing Unit (DPU). Storage is billed based on the total size of your
database, measured in GB-month. Aurora DSQL ensures your data is available and
strongly consistent across three Availability Zones in an AWS Region. You are
only charged for one logical copy of your data.
#+end_quote
* [[file:/Users/bowes/code/blog/src/org/content/dsql-circle-of-life.org][Aurora DSQL and the Circle of Life]]
:PROPERTIES:
:RSS_PERMALINK: dsql-circle-of-life.html
:PUBDATE:  2025-05-23
:ID:       71cf8819-2525-43fd-839c-b3eee83d8ca6
:END:
#+setupfile: ../templates/level0.org
Aurora DSQL and the Circle of Life

#+header: :exports results
#+begin_src ditaa :file images/circle0.png :noeval
          +------------+
reads     | {s}        |  apply changes
    +---->|   Storage  |<----+
| +------------+ |
/--------\     /------+                     |
* [[file:/Users/bowes/code/blog/src/org/content/postgres-direct-tls.org][How direct TLS can speed up your connections]]
:PROPERTIES:
:RSS_PERMALINK: postgres-direct-tls.html
:PUBDATE:  2025-05-21
:ID:       a7bad928-d11d-4fff-b1f1-e25f1e3e23e2
:END:
#+setupfile: ../templates/level0.org
How direct TLS can speed up your connections

A few months ago, one of my Aurora DSQL teammates reported a curious finding.
When connecting to their DSQL clusters using the corporate VPN, their
connections were fast and snappy - as they should be! But, when connecting
/without using the VPN/, their connections were taking around 3 seconds.
Curiously, this was only happening when in the AWS offices.

** Discovery
:PROPERTIES:
:ID:       8fd46a9e-1530-4f8c-9e4d-eea2251b2aba
:END:

The trigger for this discovery was the public Preview of Aurora DSQL at
re:Invent 2024. Before the public release, access to DSQL had been restricted,
requiring developers to be on the corporate VPN. Developers started to interact
with DSQL off-VPN, and realized it was slower - way slower - than before.
* [[file:/Users/bowes/code/blog/src/org/content/dsql-auth.org][Aurora DSQL: How authentication and authorization works]]
:PROPERTIES:
:RSS_PERMALINK: dsql-auth.html
:PUBDATE:  2025-05-13
:ID:       7f6014ed-069e-49ce-a408-be53b8eb7dca
:END:
#+setupfile: ../templates/level0.org
Aurora DSQL: How authentication and authorization works

In this article, I'm going to explain how connections to Aurora DSQL are
authenticated and authorized. This information is meant to be supplemental to
what is found in the official [[https://docs.aws.amazon.com/aurora-dsql/][Amazon Aurora DSQL]] documentation.

This is a "nuts and bolts" explanation, rather than a "how to" guide. After
reading this article you should understand:
